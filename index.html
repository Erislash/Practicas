<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Portal de Configuracion</title>
</head>
<style>

*{
  margin: 0;
  padding: 0;
  box-sizing: border-box; 
}

.contenedor{
  overflow: hidden;
  width: 90%;
  margin: 0 auto; 
}
.contenedor .titulo{
  color: #AF0F0F;
  width: 100%;
  text-align: center;
  border-bottom: 1px solid #000;
  line-height: 0.1em;
  margin-top: 30px; }
.contenedor .titulo span{
  background: #fff;
  padding: 0 10px;
}
.contenedor .formulario{
  overflow: hidden;
  margin: 20px auto;
  display: flex;
  justify-content: center;
  padding: 30px;
  width: 70%;
  border: 3px double #AF0F0F;
}
.contenedor .formulario form{
  width: 50%; 
}
.contenedor .formulario form .seccion{
  padding: 10px 0; 
}
.contenedor .formulario form .seccion .red{
  padding: 3px 7px;
  width: 187px;
}
.contenedor .formulario form .selector-ip{
  display: flex;
  padding: 10px;
  justify-content: space-around;
}
.contenedor .formulario form .selector-ip input{
  display: none;
}
.contenedor .formulario form .selector-ip label{
  background: rgb(231, 12, 12);
  color: #FFF;
  padding: 10px 20px;
  cursor: pointer;
  opacity: 0.5;
 }
.contenedor .formulario form .selector-ip input[type="radio"]:checked + label{
  background: rgb(70, 8, 8);
  opacity: 1;
}
        
.contenedor .formulario form .seccion hr{
  margin-bottom: 10px;
  color: #AF0F0F; }
.contenedor .formulario form .seccion .campo{
  
  display: flex;
  align-items: center;
  flex-direction: row;
  justify-content: space-between;
}
.contenedor .formulario form .seccion .campo .texto{
  margin: 5px 0;
  padding: 3px 7px;
  width: 160px;
}
.contenedor .formulario form .seccion .campo .red{
  transition: all ease 0.5s;
  width: 160px;
}
.contenedor .formulario form .seccion .campo .sta{
  transition: all ease 0.5s;
  width: 20%;
  -webkit-appearance: textfield;
  -moz-appearance:textfield;
}
.contenedor .formulario form .seccion .campo .sta::-webkit-inner-spin-button{
  -webkit-appearance: none;
  margin: 0;
}
.puerto{
  -webkit-appearance: textfield;
  -moz-appearance:textfield;
  width: 160px;
}
.puerto::-webkit-inner-spin-button{
  -webkit-appearance: none;
  margin: 0;
}
.contenedor .formulario form .seccion .est{
  transition: all ease 0.5s;
  display: flex;
  flex-direction: row;
}
.contenedor .formulario form .botones{
  margin-top: 15px;
  display: flex;
  justify-content: space-around;
}
.contenedor .formulario form .boton{
  background: #AF0F0F;
  padding: 10px 20px;
  color: #FFF;
  cursor: pointer;
  transition: all ease 0.4s
}
.contenedor .formulario form .boton:hover{
  background: #490606;
}
.lightBox{
  border-radius: 10px;
  color: red;
  border: 3px solid #AF0F0F;
  display: flex;
  flex-direction: column;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: #F2F2F2;
  padding: 30px 70px;
  display: none;
}
.lightBox p{
  text-align: center;
}
.lightBox h3{
  display: inline-block;
  text-align: center;
}
.lightBox .boton-reset{
  margin-top: 20px;
  background: #AF0F0F;
  padding: 10px 20px;
  color: #FFF;
  cursor: pointer;
  transition: all ease 0.4s;
  text-align: center;
}
.lightBox .boton-reset:hover{
  background: #490606;
}

@media (max-width: 950px){
  .contenedor{
    width: 100%;
  }
  .contenedor .titulo{
    color: #AF0F0F;
    width: 100%;
    border-bottom: none;
  }
  .contenedor .formulario{
    width: 90%;
  }
  .contenedor .formulario form .seccion .campo .sta{
    width: 24%;
  }
}
@media (max-width: 710px){
  .contenedor .titulo{
    text-align: left;
  }
  .contenedor .formulario{
    margin-top: 0px;
    border: none;
    width: 100%; 
  }
  .contenedor .formulario form{
    width: 80%;
  }
  .contenedor .formulario form .seccion h2{
    text-align: center;
  }
  .contenedor .formulario form .seccion .campo{
    padding: 5px 10px;
  }
  .contenedor .formulario form .seccion .campo .sta{
    width: 24%;
  }
}
@media (max-width: 415px) {
  h2{
    font-size: 20px;
  }
  body{
    font-size: 16px;
  }
  .contenedor {
    width: 100%;
  }
  .contenedor .formulario form {
    width: 100%; 
  }
  .contenedor .formulario form .seccion .campo{
    flex-direction: column;
    text-align: center;
  }
  .contenedor .formulario form .seccion .campo .red{
    width: 100%;
  }
  .contenedor .formulario form .seccion .campo .texto{
    width: 100%;
  }
  .contenedor .formulario form .seccion .est{
    width: 100%;
    display: flex;
    flex-direction: row;
  }
  .contenedor .formulario form .seccion .campo .sta{
    width: 24%;
  }
  .contenedor .formulario form .boton{
    width: 30%;
    text-align: center;
    padding: 7px 10px;
    font-size: 12px;
  }
}
.fondo-pop{
  display: none;
  width: 100%;
  height: 100%;
  background: rgb(0, 0, 0);
  opacity: 0.6;
  position: fixed;
  top: 0;
}
</style>


<body>
    <div id="light_bg" class="fondo-pop" onclick="Cerrar()"></div>

    <div class="contenedor">
        <h1 class="titulo"><span>CONFIGURACIÓN</span></h1>

        <div class="formulario">


            <form action="/cambio" method = "POST">

                <section class = "seccion">
                    <h2>Configuración de Red WiFi</h2>
                    <hr>
                    <div class="campo">
                        <label for="ssid_ap">SSID:</label>
                        

                        <select onchange="RedManual()" name="ssid_ap" id="ssid_ap" class = "red">
                          <option value="" selected="selected">NO ASIGNAR</option>
                          <option value="manual" >MANUAL</option>
                          <option value="red1">RED 1</option>
                          <option value="red2">RED 2</option>
                          <option value="red3" >RED 3</option>
                          <!-- html += ph_Redes;    CUANDO SE USA EN ARDUINO-->
                        </select>
                        <input style="display:none" oninput="javascript: if (this.value.length > 15) this.value = this.value.slice(0, 15);" 
                        class = "texto" type="text" name="ssid_ap_manual" id = "ssid_ap_manual" placeholder="SSID MANUAL">

                        
                    </div>

                    <div class="campo">
                        <label for="password_ap">Contraseña:</label>
                        <input oninput="javascript: if (this.value.length > 15) this.value = this.value.slice(0, 15);" 
                        placeholder = "Contraseña" type="password" class = "texto" id = "password_ap" name="password_ap">
                    </div>

                    <div class="selector-ip" id="selector">
                        <input type="radio" name="ip" value="dinamica" id="btn_config_dinamica" checked>
                        <label for="btn_config_dinamica">Dinámica</label>
                        
                        <input type="radio" name="ip" value="estatica" id="btn_config_estatica">
                        <label for="btn_config_estatica">Estática</label>
                    </div>
                    <article class = "seccion config_estatica" id="config_estatica">
                        <label for="ip_est">IP:</label>
                      <div class="campo est">
                        
                        <input oninput="javascript: if (this.value.length > 3) this.value = this.value.slice(0, 3);" 
                          class = "texto sta" type="number" name="ip_est_1" id = "ip_est" placeholder="IP">

                          <input oninput="javascript: if (this.value.length > 3) this.value = this.value.slice(0, 3);" 
                          class = "texto sta" type="number" name="ip_est_2" id = "ip_est" placeholder="IP">

                          <input oninput="javascript: if (this.value.length > 3) this.value = this.value.slice(0, 3);" 
                          class = "texto sta" type="number" name="ip_est_3" id = "ip_est" placeholder="IP">

                          <input oninput="javascript: if (this.value.length > 3) this.value = this.value.slice(0, 3);" 
                          class = "texto sta" type="number" name="ip_est_4" id = "ip_est" placeholder="IP">
                      </div>
                      <label for="mascara_est">Máscara:</label>
                      <div class="campo est">
                        <input oninput="javascript: if(this.value.length > 3) this.value = this.value.slice(0, 3);"
                        class = "texto sta" type="number" name="mascara_est_1" id = "mascara_est" placeholder="Máscara">

                        <input oninput="javascript: if(this.value.length > 3) this.value = this.value.slice(0, 3);"
                        class = "texto sta" type="number" name="mascara_est_2" id = "mascara_est" placeholder="Máscara">

                        <input oninput="javascript: if(this.value.length > 3) this.value = this.value.slice(0, 3);"
                        class = "texto sta" type="number" name="mascara_est_3" id = "mascara_est" placeholder="Máscara">

                        <input oninput="javascript: if(this.value.length > 3) this.value = this.value.slice(0, 3);"
                        class = "texto sta" type="number" name="mascara_est_4" id = "mascara_est" placeholder="Máscara">
                      </div>
                      <label for="puerta_est">Puerta De Enlace:</label>
                      <div class="campo est">
                        <input oninput="javascript: if(this.value.length > 3) this.value = this.value.slice(0, 3);" 
                        class = "texto sta" type="number" name="puerta_est_1" id = "puerta_est" placeholder="Gateway">

                        <input oninput="javascript: if(this.value.length > 3) this.value = this.value.slice(0, 3);" 
                        class = "texto sta" type="number" name="puerta_est_2" id = "puerta_est" placeholder="Gateway">

                        <input oninput="javascript: if(this.value.length > 3) this.value = this.value.slice(0, 3);" 
                        class = "texto sta" type="number" name="puerta_est_3" id = "puerta_est" placeholder="Gateway">

                        <input oninput="javascript: if(this.value.length > 3) this.value = this.value.slice(0, 3);" 
                        class = "texto sta" type="number" name="puerta_est_4" id = "puerta_est" placeholder="Gateway">
                      </div>
                      <label for="dns_est">DNS:</label>
                      <div class="campo est">
                        <input oninput="javascript: if (this.value.length > 3) this.value = this.value.slice(0, 3);" 
                        class = "texto sta" type="number" name="dns_est_1" id = "dns_est" placeholder="DNS">

                        <input oninput="javascript: if (this.value.length > 3) this.value = this.value.slice(0, 3);" 
                        class = "texto sta" type="number" name="dns_est_2" id = "dns_est" placeholder="DNS">

                        <input oninput="javascript: if (this.value.length > 3) this.value = this.value.slice(0, 3);" 
                        class = "texto sta" type="number" name="dns_est_3" id = "dns_est" placeholder="DNS">

                        <input oninput="javascript: if (this.value.length > 3) this.value = this.value.slice(0, 3);" 
                        class = "texto sta" type="number" name="dns_est_4" id = "dns_est" placeholder="DNS">
                      </div>
                    </article>


                </section>

                <section class = "seccion">
                    <h2>Modificar Usuario de Acceso</h2>
                    <hr>
                    <div class="campo">
                        <label for="usuario_web">Nuevo Usuario: </label>
                        <input oninput="javascript: if (this.value.length > 15) this.value = this.value.slice(0, 15);" 
                        class = "texto" type="text" name="usuario_web" id = "usuario_web" placeholder="Usuario">
                    </div>

                    <div class="campo">
                        <label for="password_web">Nueva Contraseña: </label>
                        <input oninput="javascript: if (this.value.length > 15) this.value = this.value.slice(0, 15);" 
                        placeholder = "Contraseña" class = "texto" type="password" id = "password_web" name="password_web">
                    </div>
                </section>

                <section class = "seccion">
                    <h2>Broker MQTT</h2>
                    <hr>
                    <div class="campo">
                        <label for="mqtt_server">Servidor:</label>
                        <input oninput="javascript: if (this.value.length > 30) this.value = this.value.slice(0, 30);"
                         class = "texto" type="text" name="mqtt_server" id = "mqtt_server" placeholder="Servidor MQTT">
                    </div>

                    <div class="campo">
                        <label for="id_client">Puerto:</label>
                        <input oninput="javascript: if (this.value.length > 30) this.value = this.value.slice(0, 30);"
                         class = "texto puerto" type="number" id = "id_client" name="id_client" placeholder = "Puerto">
                    </div>

                    <div class="campo">
                        <label for="usuario_mqtt">Usuario: </label>
                        <input oninput="javascript: if (this.value.length > 30) this.value = this.value.slice(0, 30);"
                        class = "texto" type="text" id = "usuario_mqtt" name="usuario_mqtt" placeholder = "Usuario">
                    </div>

                    <div class="campo">
                        <label for="password_mqtt">Contraseña: </label>
                        <input oninput="javascript: if (this.value.length > 30) this.value = this.value.slice(0, 30);"
                        class = "texto" type="password" id = "password_mqtt" name="password_mqtt" placeholder = "Contraseña">
                    </div>

                    <div class="campo">
                      <label for="prefijo_mqtt">Tema: </label>
                      <input oninput="javascript: if (this.value.length > 30) this.value = this.value.slice(0, 30);"
                      class = "texto" type="text" id = "prefijo_mqtt" name="prefijo_mqtt" placeholder = "Prefijo Tópicos">
                  </div>
                </section>

                <div class="botones">
                    
                    <input type="submit" name = "aplicar" id = "aplicar" style="display: none" onclick="this.form.action='/aplicar'">
                    <label class="boton" for="aplicar">Aplicar</label>
                    
                    <div onclick="LightBox('reinicio')" class="boton" id="btn_resetear">Reiniciar</div>

                    <div onclick="LightBox('reseteo')" class="boton" for="btn_fabrica">Restablecer</div>
                </div>

                <div class="lightBox" id="lightBox">
                    <h3 id="confirmacion"></h3>
                    <p>¿Estás Seguro/a?</p>
                    <input style="display: none" type="submit" name = "resetear" id = "resetear">
                    <label id = "realizar" for="resetear" class="boton-reset"></label>

                    <div onclick="Cerrar()" id="btn_volver" class="boton-reset">Volver</div>
                </div>
            </form>
        </div>
    </div>
</body>
<script>
  var formEstatica = document.getElementById('config_estatica');
 
  var dinamico = document.getElementById('btn_config_dinamica');
  var estatico = document.getElementById('btn_config_estatica');
  formEstatica.style.display = 'none';


  var lightBox = document.getElementById('lightBox');
  var fondo = document.getElementById('light_bg');
  var volver = document.getElementById('btn_volver');
  var confirm = document.getElementById('confirmacion');
  var resetear =  document.getElementById('resetear');
  var realizar =  document.getElementById('realizar');

  fondo.style.display = 'none';
  lightBox.style.display = 'none';

  
  function Cerrar()
  {
    fondo.style.display = 'none';
    lightBox.style.display = 'none';
  }


  function LightBox(accion){
    fondo.style.display = 'block';
    lightBox.style.display = 'flex';

    if(accion == 'reinicio'){
      confirmacion.innerHTML = "Está por Reiniciar el ESP8266";
      resetear.form.action = '/reiniciar';
      realizar.innerHTML = 'REINICIAR';
    }
    else if(accion == 'reseteo'){
      confirmacion.innerHTML = "Está por REINICIAR DE FÁBRICA el ESP8266";
      resetear.form.action = '/restablecer';
      realizar.innerHTML = 'RESTABLECER';
    }
  }

  estatico.addEventListener('change', function()
  {
    if(estatico.checked)
  {
    formEstatica.style.display = 'block';
  }
  });

  dinamico.addEventListener('change', function()
  {
    if(dinamico.checked)
  {
    formEstatica.style.display = 'none';
  }
  });

  function RedManual(){
    var red = document.getElementById("ssid_ap").value;
    var manual = document.getElementById("ssid_ap_manual");

    if(red == "manual"){
        manual.style.display = "inline-block";
      }
    else
        manual.style.display = "none";
}
</script>


</html>